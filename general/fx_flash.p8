pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
-- init
function _init()
	cam=vec2(-63,-63)
	fx={
		pos=vec2(20,20),
		rot=0
	}
end

-->8
-- update

function _update60()
	if (btn(0)) cam.x=cam.x-1
	if (btn(1)) cam.x=cam.x+1
	if (btn(2)) cam.y=cam.y-1
	if (btn(3)) cam.y=cam.y+1
	
	if (btn(4)) fx.rot=fx.rot+1
	if (btn(5)) fx.rot=fx.rot-1
end

-->8
-- draw

function _draw()
	cls()
	camera(cam.x, cam.y)
	for x=-100,100 do
		local lst=vec2(x,calc(-x)):rot(fx.rot)
		local len=vec2(x,calc(x)):rot(fx.rot)
		line(lst.x,lst.y, len.x,len.y, 10)
	end
end

function calc(x)
	return 50/x
end

-->8
-- utils

function rot(self,r)
	r=r*3.14/180
	self.x = self.x*cos(r) - self.y*sin(r)
	self.y = self.x*sin(r) + self.y*cos(r)
	return self
end

function vec2(x,y)
	return {
		x=x,
		y=y,
		rot=rot
	}
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
